/*! contentchef-js-client 22-11-2015 */
!function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){this.webPageId=a,this.name=b,this.url=c,this.templateId=d,this.templateRevision=e,this.group=f,this.originId=g,this.contentAreas=h,this.variablesArea=i}function d(){this.message="Not found"}function e(){this.message="Generic error"}function f(a){if(400!=a.status)return j.fn.GENERIC_ERROR;var b=a.data["failure body"];return b&&b.failure&&"not.found"==b.failure?j.fn.NOT_FOUND:j.fn.GENERIC_ERROR}function g(a){if(400!=a.status)return j.fn.GENERIC_ERROR;var b=a.data.failure;return b&&"not.found"==b?j.fn.NOT_FOUND:j.fn.GENERIC_ERROR}function h(){var a="object"!=typeof global,b=a?window:global;return b.contentChefCache||(b.contentChefCache={}),b.contentChefCache}var i=(require("es6-promise"),require("axios")),j=function(a,b,c,d){var e=j.fn.initialize(a,b,c,d);return e};j.fn=j.prototype={API_URL:"/contentchef-delivery/v1/",NOT_FOUND:new d,GENERIC_ERROR:new e,initialize:function(a,b,c,d,e){return this.url=a+j.prototype.API_URL,this.origin=b,this.apiToken=c,this.apiCache=d||h(),this.dataCacheTTL=e||10,this},lookupPageByUrl:function(a){var b=this.url+"getWebPageByUrl/"+this.origin+"/"+encodeURIComponent(a);return k(b,this.apiToken,m,f)},lookupPageById:function(a){var b=this.url+"getWebPageById/"+this.origin+"/"+encodeURIComponent(a);return k(b,this.apiToken,m,f)},lookupContentLatestRevision:function(a,b){var c=this.url+"getLatestContent/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return k(c,this.apiToken,n,g)},lookupContentRevision:function(a,b){var c=this.url+"getContent/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return k(c,this.apiToken,n,g)}};var k=function(a,b,c,d){return new Promise(function(e,f){i.get(a,{headers:{"x-square-api-key":b}}).then(function(a){e(c.call(this,a.data))})["catch"](function(a){f(d.call(this,a))})})};c.prototype={};var l=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.areaName,f=d.contents;b[e]=1==f.length?f[0]:d.contents}return b},m=function(a){return new c(a.webPageId,a.name,a.url,a.templateId,a.templateRevision,a.group,a["#originId"],l(a.contentAreas),a.variablesArea)},n=function(a){return a};d.prototype={},e.prototype={},a.ContentChef={Api:j}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),require("./api.js");