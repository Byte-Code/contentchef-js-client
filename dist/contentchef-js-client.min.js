/*! contentchef-js-client 08-12-2015 */
!function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){this.webPageId=a,this.name=b,this.url=c,this.templateId=d,this.templateRevision=e,this.group=f,this.originId=g,this.contentAreas=h,this.variablesArea=i}function d(a,b,c,d,e,f,g,h){this.webPageId=a,this.name=b,this.url=c,this.templateId=d,this.templateRevision=e,this.group=f,this.originId=g,this.revisionId=h}function e(){this.message="Not found"}function f(){this.message="Generic error"}function g(a){if(400!=a.status)return i.fn.GENERIC_ERROR;var b=a.data.failureBody;return b&&b.failure&&"not.found"==b.failure?i.fn.NOT_FOUND:i.fn.GENERIC_ERROR}function h(){var a="object"!=typeof global,b=a?window:global;return b.contentChefCache||(b.contentChefCache={}),b.contentChefCache}var i=function(a,b,c,d){var e=i.fn.initialize(a,b,c,d);return e};i.fn=i.prototype={API_URL:"/contentchef-delivery/v1/",NOT_FOUND:new e,GENERIC_ERROR:new f,initialize:function(a,b,c,d,e){return this.url=a+i.prototype.API_URL,this.origin=b,this.apiToken=c,this.apiCache=d||h(),this.dataCacheTTL=e||10,this},lookupPageByUrl:function(a){var b=this.url+"getWebPageByUrl/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a);return j(b,this.apiToken,l,g)},lookupPageById:function(a){var b=this.url+"getWebPageById/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a);return j(b,this.apiToken,l,g)},lookupContentLatestRevision:function(a,b){var c=this.url+"getLatestContent/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return j(c,this.apiToken,n,g)},lookupContentLatestRevisionBySlug:function(a,b){var c=this.url+"getLatestContentBySlug/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return j(c,this.apiToken,n,g)},lookupContentRevision:function(a,b){var c=this.url+"getContent/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return j(c,this.apiToken,n,g)},lookupContentRevisionBySlug:function(a,b){var c=this.url+"getContentBySlug/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return j(c,this.apiToken,n,g)},listAllContentByDefinition:function(a){var b=this.url+"listContentsByDefinitionId/"+encodeURIComponent(this.origin)+"/"+encodeURIComponent(a);return j(b,this.apiToken,o,g)},searchContent:function(a,b){var c=this.url+"searchContent/"+encodeURIComponent(a);return b&&(c=c+"?queryParam="+encodeURIComponent(b)),j(c,this.apiToken,o,g)},getAvailablePages:function(){var a=this.url+"getAvailablePages/"+encodeURIComponent(this.origin);return j(a,this.apiToken,m,g)}};var j=function(a,b,c,d){return new Promise(function(e,f){axios.get(a,{headers:{"x-square-api-key":b}}).then(function(a){e(c.call(this,a.data))})["catch"](function(a){f(d.call(this,a))})})};c.prototype={},d.prototype={};var k=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.areaName,f=d.contents;b[e]=1==f.length?f[0]:d.contents}return b},l=function(a){return new c(a.webPageId,a.name,a.url,a.templateId,a.templateRevision,a.group,a["#originId"],k(a.contentAreas),a.variablesArea)},m=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];b.push(new d(e.webPageId,e.name,e.url,e.templateId,e.templateRevision,e.group,e["#originId"],e.revisionId))}return a},n=function(a){return a},o=function(a){return a};e.prototype={},f.prototype={},a.ContentChef={Api:i}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window);