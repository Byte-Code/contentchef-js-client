/*! contentchef-js-client 07-12-2015 */
!function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){this.webPageId=a,this.name=b,this.url=c,this.templateId=d,this.templateRevision=e,this.group=f,this.originId=g,this.contentAreas=h,this.variablesArea=i}function d(){this.message="Not found"}function e(){this.message="Generic error"}function f(a){if(400!=a.status)return h.fn.GENERIC_ERROR;var b=a.data.failureBody;return b&&b.failure&&"not.found"==b.failure?h.fn.NOT_FOUND:h.fn.GENERIC_ERROR}function g(){var a="object"!=typeof global,b=a?window:global;return b.contentChefCache||(b.contentChefCache={}),b.contentChefCache}var h=function(a,b,c,d){var e=h.fn.initialize(a,b,c,d);return e};h.fn=h.prototype={API_URL:"/contentchef-delivery/v1/",NOT_FOUND:new d,GENERIC_ERROR:new e,initialize:function(a,b,c,d,e){return this.url=a+h.prototype.API_URL,this.origin=b,this.apiToken=c,this.apiCache=d||g(),this.dataCacheTTL=e||10,this},lookupPageByUrl:function(a){var b=this.url+"getWebPageByUrl/"+this.origin+"/"+encodeURIComponent(a);return i(b,this.apiToken,k,f)},lookupPageById:function(a){var b=this.url+"getWebPageById/"+this.origin+"/"+encodeURIComponent(a);return i(b,this.apiToken,k,f)},lookupContentLatestRevision:function(a,b){var c=this.url+"getLatestContent/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return i(c,this.apiToken,l,f)},lookupContentLatestRevisionBySlug:function(a,b){var c=this.url+"getLatestContentBySlug/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return i(c,this.apiToken,l,f)},lookupContentRevision:function(a,b){var c=this.url+"getContent/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return i(c,this.apiToken,l,f)},lookupContentRevisionBySlug:function(a,b){var c=this.url+"getContentBySlug/"+this.origin+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(b);return i(c,this.apiToken,l,f)},listAllContentByDefinition:function(a){var b=this.url+"listContentsByDefinitionId/"+this.origin+"/"+encodeURIComponent(a);return i(b,this.apiToken,m,f)}};var i=function(a,b,c,d){return new Promise(function(e,f){axios.get(a,{headers:{"x-square-api-key":b}}).then(function(a){e(c.call(this,a.data))})["catch"](function(a){f(d.call(this,a))})})};c.prototype={};var j=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.areaName,f=d.contents;b[e]=1==f.length?f[0]:d.contents}return b},k=function(a){return new c(a.webPageId,a.name,a.url,a.templateId,a.templateRevision,a.group,a["#originId"],j(a.contentAreas),a.variablesArea)},l=function(a){return a},m=function(a){return a};d.prototype={},e.prototype={},a.ContentChef={Api:h}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window);